<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gotaralvo - Acerte o Alvo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ff5c5c 0%, #ff758c 50%, #ff5c8d 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    /* Part√≠culas de fundo */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
      animation: pulse 8s ease-in-out infinite;
      z-index: 0;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Bot√£o voltar */
    .btn-back {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      backdrop-filter: blur(10px);
      z-index: 1000;
      transition: all 0.3s;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .btn-back:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    /* Container principal */
    .game-container {
      position: relative;
      z-index: 1;
      width: 90%;
      max-width: 1000px;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 80px rgba(255, 92, 92, 0.2);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* Header do jogo */
    .game-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .game-title {
      font-size: 48px;
      font-weight: bold;
      background: linear-gradient(135deg, #ff5c5c 0%, #ff758c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    .game-subtitle {
      color: #666;
      font-size: 16px;
    }

    /* Controles e HUD */
    .controls-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(255, 92, 92, 0.1) 0%, rgba(255, 117, 140, 0.1) 100%);
      border-radius: 12px;
      gap: 20px;
      flex-wrap: wrap;
    }

    .hud {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }

    .score-item {
      text-align: center;
    }

    .score-label {
      font-size: 12px;
      color: #888;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 5px;
    }

    .score-value {
      font-size: 32px;
      font-weight: bold;
      background: linear-gradient(135deg, #ff5c5c 0%, #ff758c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .btn-group {
      display: flex;
      gap: 10px;
    }

    button {
      background: linear-gradient(135deg, #ff5c5c 0%, #ff758c 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(255, 92, 92, 0.3);
      transition: all 0.3s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 92, 92, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button.secondary {
      background: rgba(255, 92, 92, 0.1);
      color: #ff5c5c;
      border: 2px solid #ff5c5c;
    }

    button.secondary:hover {
      background: rgba(255, 92, 92, 0.2);
    }

    /* Arena */
    .arena {
      position: relative;
      height: 540px;
      background: #1a1a2e;
      border-radius: 16px;
      overflow: hidden;
      box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.3),
        inset 0 -4px 10px rgba(0, 0, 0, 0.1);
      transition: background-color 1s ease;
    }

    /* Imagem de fundo da arena */
    .arena::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('fundo.webp');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: blur(2px) brightness(0.4);
      z-index: 0;
    }

    /* Overlay escuro na arena */
    .arena::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg,
        rgba(20, 20, 35, 0.5) 0%,
        rgba(20, 20, 35, 0.4) 50%,
        rgba(20, 20, 35, 0.5) 100%);
      z-index: 1;
      pointer-events: none;
    }

    .target {
      position: absolute;
      border-radius: 50%;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      background-size: cover;
      background-position: center;
      transition: transform 0.1s;
      z-index: 10;
    }

    .target:hover {
      transform: scale(1.1);
    }

    /* Bola preta - mais vis√≠vel */
    .target.black {
      background: radial-gradient(circle at 40% 40%, #3a0000 0%, #1a0000 50%, #000 100%) !important;
      border: 3px solid #ff0000;
      box-shadow:
        0 0 20px rgba(255, 0, 0, 0.8),
        0 8px 18px rgba(0, 0, 0, 0.6),
        inset 0 -2px 10px rgba(255, 0, 0, 0.3);
      animation: pulse-red 1.5s ease-in-out infinite;
    }

    .target.black::before {
      content: '‚ò†Ô∏è';
      font-size: 20px;
      position: absolute;
      z-index: 2;
      filter: drop-shadow(0 0 4px rgba(255, 0, 0, 0.8));
    }

    .target.black.small::before {
      font-size: 16px;
    }

    .target.black.medium::before {
      font-size: 24px;
    }

    .target.black.large::before {
      font-size: 32px;
    }

    @keyframes pulse-red {
      0%, 100% {
        border-color: #ff0000;
        box-shadow:
          0 0 20px rgba(255, 0, 0, 0.8),
          0 8px 18px rgba(0, 0, 0, 0.6),
          inset 0 -2px 10px rgba(255, 0, 0, 0.3);
      }
      50% {
        border-color: #ff3333;
        box-shadow:
          0 0 30px rgba(255, 0, 0, 1),
          0 8px 18px rgba(0, 0, 0, 0.6),
          inset 0 -2px 10px rgba(255, 0, 0, 0.5);
      }
    }

    .target.small { width: 34px; height: 34px; }
    .target.medium { width: 50px; height: 50px; }
    .target.large { width: 70px; height: 70px; }

    .target .scorePop {
      position: absolute;
      top: -28px;
      font-weight: 800;
      font-size: 18px;
      color: #ff5c5c;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .18s, transform .18s;
    }

    /* Overlay */
    .overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      z-index: 100;
    }

    .overlay .box {
      background: white;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      min-width: 320px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: popIn 0.3s ease-out;
    }

    @keyframes popIn {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .overlay h2 {
      font-size: 32px;
      background: linear-gradient(135deg, #ff5c5c 0%, #ff758c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 15px;
    }

    .small-muted {
      font-size: 14px;
      color: #666;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .game-container {
        padding: 20px;
      }

      .game-title {
        font-size: 32px;
      }

      .arena {
        height: 420px;
      }

      .controls-bar {
        flex-direction: column;
        gap: 15px;
      }

      .hud,
      .btn-group {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <a href="../../index.html" class="btn-back">‚Üê Voltar</a>

  <div class="game-container">
    <div class="game-header">
      <div class="game-title">üéØ Gotaralvo</div>
      <div class="game-subtitle">Acerte os alvos com imagem e evite os pretos!</div>
    </div>

    <div class="controls-bar">
      <div class="hud">
        <div class="score-item">
          <div class="score-label">Pontos</div>
          <div class="score-value" id="score">0</div>
        </div>
        <div class="score-item">
          <div class="score-label">Alvos Ativos</div>
          <div class="score-value" id="targetsCount">0</div>
        </div>
      </div>

      <div class="btn-group">
        <button id="startBtn">‚ñ∂ Iniciar</button>
        <button id="restartBtn" class="secondary" style="display:none">üîÑ Reiniciar</button>
      </div>
    </div>

    <div class="arena" id="arena">
      <div class="overlay" id="overlay" style="display:flex;">
        <div class="box">
          <h2>Pronto para jogar?</h2>
          <div class="small-muted">
            Clique nos alvos com imagem para ganhar pontos.<br>
            Evite os alvos pretos!<br>
            Se um alvo cair sem voc√™ acertar, √© game over.
          </div>
          <button id="overlayStart">üéØ Come√ßar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const SPAWN_INTERVAL = 1000;
    const MIN_SPEED = 60;
    const MAX_SPEED = 150;
    const TARGET_SIZES = [34,50,70];
    const ARENA = document.getElementById('arena');

    const scoreEl = document.getElementById('score');
    const targetsCountEl = document.getElementById('targetsCount');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const overlay = document.getElementById('overlay');
    const overlayStart = document.getElementById('overlayStart');

    let score = 0;
    let running = false;
    let lastTime = null;
    let targets = [];
    let spawnTimer = 0;
    let elapsedTime = 0;
    let nextColorChange = 50;

    function rnd(min, max){ return Math.random()*(max-min)+min }
    function randomColor(){ 
      return `hsl(${Math.floor(Math.random()*360)}, 60%, 15%)`; 
    }

    function createTarget(){
      const size = TARGET_SIZES[Math.floor(Math.random()*TARGET_SIZES.length)];
      const isBlack = Math.random() < 0.15;

      const el = document.createElement('div');
      el.className = 'target';
      if(size<=36) el.classList.add('small');
      else if(size<=50) el.classList.add('medium');
      else el.classList.add('large');

      el.style.width = size + 'px';
      el.style.height = size + 'px';

      if(isBlack){
        el.classList.add('black');
      } else {
        el.style.backgroundImage = 'url("alvo.jpeg")';
      }

      el.style.left = rnd(8, ARENA.clientWidth - size - 8) + 'px';
      el.style.top = '-' + size + 'px';

      const point = document.createElement('div');
      point.className='scorePop';
      point.innerText=isBlack?'X':'+1';
      el.appendChild(point);

      ARENA.appendChild(el);

      const difficultyFactor = 1 + elapsedTime / 30;
      const target = {
        el,
        x: parseFloat(el.style.left),
        y: -size,
        size,
        speed: rnd(MIN_SPEED, MAX_SPEED) * difficultyFactor,
        clicked:false,
        isBlack
      };

      el.addEventListener('click', ()=>{
        if(!running || target.clicked) return;
        target.clicked = true;
        if(target.isBlack){
          gameOver('Voc√™ clicou em um alvo preto!');
          return;
        }
        score++;
        scoreEl.innerText = score;

        // muda o fundo a cada 50 pontos
        if(score >= nextColorChange){
          ARENA.style.backgroundColor = randomColor();
          nextColorChange += 50;
        }

        point.style.opacity = '1'; point.style.transform='translateY(-6px)';
        el.style.transform = 'scale(0.9)';
        setTimeout(()=> el.remove(), 160);
      });

      targets.push(target);
      targetsCountEl.innerText = targets.length;
    }

    function gameOver(reason){
      running = false;
      overlay.style.display = 'flex';
      overlay.querySelector('.box').innerHTML = `<h2>Game Over</h2><div class="small-muted">${reason}</div><div style="margin-top:12px"><button id="goRestart">Jogar novamente</button></div>`;
      document.getElementById('goRestart').addEventListener('click', resetGame);
      restartBtn.style.display = 'inline-block';
      startBtn.style.display = 'none';
    }

    function resetGame(){
      targets.forEach(t=>{ if(t.el && t.el.parentNode) t.el.remove() });
      targets = [];
      score = 0; scoreEl.innerText = '0';
      targetsCountEl.innerText = '0';
      overlay.style.display = 'none';
      restartBtn.style.display = 'none';
      startBtn.style.display = 'inline-block';
      running = false;
      elapsedTime = 0;
      nextColorChange = 50;
      ARENA.style.backgroundColor = '';
    }

    function startGame(){
      resetGame();
      running = true;
      lastTime = performance.now();
      spawnTimer = 0;
      overlay.style.display = 'none';
      startBtn.style.display = 'none';
      restartBtn.style.display = 'none';
      const burst = Math.floor(rnd(1,3));
      for(let i=0;i<burst;i++){ setTimeout(createTarget, i*120) }
      requestAnimationFrame(loop);
    }

    function loop(ts){
      if(!running) return;
      const dt = (ts - lastTime) / 1000; lastTime = ts;
      elapsedTime += dt;
      spawnTimer += dt*1000;
      if(spawnTimer >= SPAWN_INTERVAL){
        spawnTimer -= SPAWN_INTERVAL;
        const count = Math.random()<0.25 ? 2 : 1;
        for(let i=0;i<count;i++) createTarget();
      }

      for(let i=targets.length-1;i>=0;i--){
        const t = targets[i];
        t.y += t.speed * dt;
        t.el.style.top = Math.round(t.y) + 'px';
        if(t.clicked){ targets.splice(i,1); continue }
        if(t.y + t.size >= ARENA.clientHeight){
          if(!t.isBlack){
            gameOver('Voc√™ perdeu um alvo!');
            return;
          } else {
            // alvo preto toca o ch√£o ‚Äî apenas remove
            t.el.remove();
            targets.splice(i,1);
          }
        }
      }
      targetsCountEl.innerText = targets.length;
      requestAnimationFrame(loop);
    }

    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', resetGame);
    overlayStart.addEventListener('click', startGame);
    window.addEventListener('resize', ()=>{
      targets.forEach(t=>{
        t.x = Math.min(t.x, ARENA.clientWidth - t.size - 8);
        t.el.style.left = t.x + 'px';
      })
    });
  </script>
</body>
</html>
